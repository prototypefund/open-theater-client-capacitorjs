!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=8)}([function(e,t,n){"use strict";(function(t){function n(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function r(e,t){for(var n,r="",o=0,i=-1,s=0,a=0;a<=e.length;++a){if(a<e.length)n=e.charCodeAt(a);else{if(47===n)break;n=47}if(47===n){if(i===a-1||1===s);else if(i!==a-1&&2===s){if(r.length<2||2!==o||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){var c=r.lastIndexOf("/");if(c!==r.length-1){-1===c?(r="",o=0):o=(r=r.slice(0,c)).length-1-r.lastIndexOf("/"),i=a,s=0;continue}}else if(2===r.length||1===r.length){r="",o=0,i=a,s=0;continue}t&&(r.length>0?r+="/..":r="..",o=2)}else r.length>0?r+="/"+e.slice(i+1,a):r=e.slice(i+1,a),o=a-i-1;i=a,s=0}else 46===n&&-1!==s?++s:s=-1}return r}var o={resolve:function(){for(var e,o="",i=!1,s=arguments.length-1;s>=-1&&!i;s--){var a;s>=0?a=arguments[s]:(void 0===e&&(e=t.cwd()),a=e),n(a),0!==a.length&&(o=a+"/"+o,i=47===a.charCodeAt(0))}return o=r(o,!i),i?o.length>0?"/"+o:"/":o.length>0?o:"."},normalize:function(e){if(n(e),0===e.length)return".";var t=47===e.charCodeAt(0),o=47===e.charCodeAt(e.length-1);return 0!==(e=r(e,!t)).length||t||(e="."),e.length>0&&o&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return n(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,t=0;t<arguments.length;++t){var r=arguments[t];n(r),r.length>0&&(void 0===e?e=r:e+="/"+r)}return void 0===e?".":o.normalize(e)},relative:function(e,t){if(n(e),n(t),e===t)return"";if((e=o.resolve(e))===(t=o.resolve(t)))return"";for(var r=1;r<e.length&&47===e.charCodeAt(r);++r);for(var i=e.length,s=i-r,a=1;a<t.length&&47===t.charCodeAt(a);++a);for(var c=t.length-a,u=s<c?s:c,l=-1,d=0;d<=u;++d){if(d===u){if(c>u){if(47===t.charCodeAt(a+d))return t.slice(a+d+1);if(0===d)return t.slice(a+d)}else s>u&&(47===e.charCodeAt(r+d)?l=d:0===d&&(l=0));break}var f=e.charCodeAt(r+d);if(f!==t.charCodeAt(a+d))break;47===f&&(l=d)}var h="";for(d=r+l+1;d<=i;++d)d!==i&&47!==e.charCodeAt(d)||(0===h.length?h+="..":h+="/..");return h.length>0?h+t.slice(a+l):(a+=l,47===t.charCodeAt(a)&&++a,t.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(n(e),0===e.length)return".";for(var t=e.charCodeAt(0),r=47===t,o=-1,i=!0,s=e.length-1;s>=1;--s)if(47===(t=e.charCodeAt(s))){if(!i){o=s;break}}else i=!1;return-1===o?r?"/":".":r&&1===o?"//":e.slice(0,o)},basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');n(e);var r,o=0,i=-1,s=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var a=t.length-1,c=-1;for(r=e.length-1;r>=0;--r){var u=e.charCodeAt(r);if(47===u){if(!s){o=r+1;break}}else-1===c&&(s=!1,c=r+1),a>=0&&(u===t.charCodeAt(a)?-1==--a&&(i=r):(a=-1,i=c))}return o===i?i=c:-1===i&&(i=e.length),e.slice(o,i)}for(r=e.length-1;r>=0;--r)if(47===e.charCodeAt(r)){if(!s){o=r+1;break}}else-1===i&&(s=!1,i=r+1);return-1===i?"":e.slice(o,i)},extname:function(e){n(e);for(var t=-1,r=0,o=-1,i=!0,s=0,a=e.length-1;a>=0;--a){var c=e.charCodeAt(a);if(47!==c)-1===o&&(i=!1,o=a+1),46===c?-1===t?t=a:1!==s&&(s=1):-1!==t&&(s=-1);else if(!i){r=a+1;break}}return-1===t||-1===o||0===s||1===s&&t===o-1&&t===r+1?"":e.slice(t,o)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var n=t.dir||t.root,r=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+r:n+e+r:r}("/",e)},parse:function(e){n(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;var r,o=e.charCodeAt(0),i=47===o;i?(t.root="/",r=1):r=0;for(var s=-1,a=0,c=-1,u=!0,l=e.length-1,d=0;l>=r;--l)if(47!==(o=e.charCodeAt(l)))-1===c&&(u=!1,c=l+1),46===o?-1===s?s=l:1!==d&&(d=1):-1!==s&&(d=-1);else if(!u){a=l+1;break}return-1===s||-1===c||0===d||1===d&&s===c-1&&s===a+1?-1!==c&&(t.base=t.name=0===a&&i?e.slice(1,c):e.slice(a,c)):(0===a&&i?(t.name=e.slice(1,s),t.base=e.slice(1,c)):(t.name=e.slice(a,s),t.base=e.slice(a,c)),t.ext=e.slice(s,c)),a>0?t.dir=e.slice(0,a-1):i&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};o.posix=o,e.exports=o}).call(this,n(5))},function(e,t,n){"use strict";var r,o,i,s,a,c,u,l,d,f,h,p,m,g;n.r(t),n.d(t,"helloWorld",(function(){return V})),n.d(t,"getPlatform",(function(){return U})),n.d(t,"hideStatusBar",(function(){return k})),n.d(t,"showStatusBar",(function(){return N})),n.d(t,"showToast",(function(){return W})),n.d(t,"getWifiSsid",(function(){return X})),n.d(t,"getBattery",(function(){return G})),n.d(t,"detectServer",(function(){return $})),n.d(t,"setScreenBrightness",(function(){return Z})),n.d(t,"connectToSSID",(function(){return J})),n.d(t,"scanSSIDs",(function(){return Q})),n.d(t,"readFile",(function(){return K})),n.d(t,"createDir",(function(){return q})),n.d(t,"readDir",(function(){return B})),n.d(t,"fileWrite",(function(){return M})),n.d(t,"deleteFile",(function(){return z})),n.d(t,"getFileStat",(function(){return Y})),n.d(t,"getServiceProtocol",(function(){return ee})),n.d(t,"getProvisioningFilesFromProject",(function(){return te})),n.d(t,"getFileListFromCache",(function(){return ne})),n.d(t,"initMediaRootDir",(function(){return re})),n.d(t,"getFileListDiff",(function(){return oe})),n.d(t,"getCapacitorAssetUriForChannel",(function(){return H})),function(e){e.Prompt="PROMPT",e.Camera="CAMERA",e.Photos="PHOTOS"}(r||(r={})),function(e){e.Rear="REAR",e.Front="FRONT"}(o||(o={})),function(e){e.Uri="uri",e.Base64="base64",e.DataUrl="dataUrl"}(i||(i={})),function(e){e.Documents="DOCUMENTS",e.Data="DATA",e.Cache="CACHE",e.External="EXTERNAL",e.ExternalStorage="EXTERNAL_STORAGE"}(s||(s={})),function(e){e.UTF8="utf8",e.ASCII="ascii",e.UTF16="utf16"}(a||(a={})),function(e){e.Heavy="HEAVY",e.Medium="MEDIUM",e.Light="LIGHT"}(c||(c={})),function(e){e.SUCCESS="SUCCESS",e.WARNING="WARNING",e.ERROR="ERROR"}(u||(u={})),function(e){e.Dark="DARK",e.Light="LIGHT"}(l||(l={})),function(e){e.Body="body",e.Ionic="ionic",e.Native="native",e.None="none"}(d||(d={})),function(e){e.Default="DEFAULT",e.Destructive="DESTRUCTIVE",e.Cancel="CANCEL"}(f||(f={})),function(e){e.Camera="camera",e.Photos="photos",e.Geolocation="geolocation",e.Notifications="notifications",e.ClipboardRead="clipboard-read",e.ClipboardWrite="clipboard-write",e.Microphone="microphone"}(h||(h={})),function(e){e.Smart="smart",e.Shared="shared",e.User="user"}(p||(p={})),function(e){e.Dark="DARK",e.Light="LIGHT"}(m||(m={})),function(e){e.None="NONE",e.Slide="SLIDE",e.Fade="FADE"}(g||(g={}));var v=n(2),y=new(function(){function e(){this.plugins={},this.loadedPlugins={}}return e.prototype.addPlugin=function(e){this.plugins[e.config.name]=e},e.prototype.getPlugin=function(e){return this.plugins[e]},e.prototype.loadPlugin=function(e){var t=this.getPlugin(e);t?t.load():console.error("Unable to load web plugin "+e+", no such plugin found.")},e.prototype.getPlugins=function(){var e=[];for(var t in this.plugins)e.push(this.plugins[t]);return e},e}()),w=function(){function e(e,t){this.config=e,this.loaded=!1,this.listeners={},this.windowListeners={},t?t.addPlugin(this):y.addPlugin(this)}return e.prototype.addWindowListener=function(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0},e.prototype.removeWindowListener=function(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)},e.prototype.addListener=function(e,t){var n=this;this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t);var r=this.windowListeners[e];return r&&!r.registered&&this.addWindowListener(r),{remove:function(){n.removeListener(e,t)}}},e.prototype.removeListener=function(e,t){var n=this.listeners[e];if(n){var r=n.indexOf(t);this.listeners[e].splice(r,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}},e.prototype.removeAllListeners=function(){for(var e in this.listeners={},this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}},e.prototype.notifyListeners=function(e,t){var n=this.listeners[e];n&&n.forEach((function(e){return e(t)}))},e.prototype.hasListeners=function(e){return!!this.listeners[e].length},e.prototype.registerWindowListener=function(e,t){var n=this;this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:function(e){n.notifyListeners(t,e)}}},e.prototype.requestPermissions=function(){return Capacitor.isNative?Capacitor.nativePromise(this.config.name,"requestPermissions",{}):Promise.resolve({results:[]})},e.prototype.load=function(){this.loaded=!0},e}(),b=function(e,t){e.hasOwnProperty(t.config.name)&&!function(e){return e.config.platforms&&e.config.platforms.indexOf(Capacitor.platform)>=0}(t)||(e[t.config.name]=t)},P=function(e,t){return(P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function E(e,t){function n(){this.constructor=e}P(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function S(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))}function x(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}new(function(e){function t(){return e.call(this,{name:"Accessibility",platforms:["web"]})||this}return E(t,e),t.prototype.isScreenReaderEnabled=function(){throw new Error("Feature not available in the browser")},t.prototype.speak=function(e){if(!("speechSynthesis"in window))return Promise.reject("Browser does not support the Speech Synthesis API");var t=new SpeechSynthesisUtterance(e.value);return e.language&&(t.lang=e.language),window.speechSynthesis.speak(t),Promise.resolve()},t}(w)),new(function(e){function t(){var t=e.call(this,{name:"App",platforms:["web"]})||this;return"undefined"!=typeof document&&document.addEventListener("visibilitychange",t.handleVisibilityChange.bind(t),!1),t}return E(t,e),t.prototype.exitApp=function(){throw new Error("Method not implemented.")},t.prototype.canOpenUrl=function(e){return Promise.resolve({value:!0})},t.prototype.openUrl=function(e){return Promise.resolve({completed:!0})},t.prototype.getLaunchUrl=function(){return Promise.resolve({url:""})},t.prototype.getState=function(){return Promise.resolve({isActive:!0!==document.hidden})},t.prototype.handleVisibilityChange=function(){var e={isActive:!0!==document.hidden};this.notifyListeners("appStateChange",e)},t}(w)),new(function(e){function t(){return e.call(this,{name:"Browser",platforms:["web"]})||this}return E(t,e),t.prototype.open=function(e){return S(this,void 0,void 0,(function(){return x(this,(function(t){return this._lastWindow=window.open(e.url,e.windowName||"_blank"),[2,Promise.resolve()]}))}))},t.prototype.prefetch=function(e){return S(this,void 0,void 0,(function(){return x(this,(function(e){return[2,Promise.resolve()]}))}))},t.prototype.close=function(){return S(this,void 0,void 0,(function(){return x(this,(function(e){return this._lastWindow&&this._lastWindow.close(),[2,Promise.resolve()]}))}))},t}(w)),new(function(e){function t(){return e.call(this,{name:"Camera",platforms:["web"]})||this}return E(t,e),t.prototype.getPhoto=function(e){return S(this,void 0,void 0,(function(){var t=this;return x(this,(function(n){return[2,new Promise((function(n,r){return S(t,void 0,void 0,(function(){var t,o=this;return x(this,(function(i){switch(i.label){case 0:return e.webUseInput?(this.fileInputExperience(e,n),[3,7]):[3,1];case 1:if(!customElements.get("pwa-camera-modal"))return[3,6];t=document.createElement("pwa-camera-modal"),document.body.appendChild(t),i.label=2;case 2:return i.trys.push([2,4,,5]),[4,t.componentOnReady()];case 3:return i.sent(),t.addEventListener("onPhoto",(function(i){return S(o,void 0,void 0,(function(){var o,s;return x(this,(function(a){switch(a.label){case 0:return null!==(o=i.detail)?[3,1]:(r("User cancelled photos app"),[3,4]);case 1:return o instanceof Error?(r(o.message),[3,4]):[3,2];case 2:return s=n,[4,this._getCameraPhoto(o,e)];case 3:s.apply(void 0,[a.sent()]),a.label=4;case 4:return t.dismiss(),document.body.removeChild(t),[2]}}))}))})),t.present(),[3,5];case 4:return i.sent(),this.fileInputExperience(e,n),[3,5];case 5:return[3,7];case 6:console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/pwa-elements."),this.fileInputExperience(e,n),i.label=7;case 7:return[2]}}))}))}))]}))}))},t.prototype.fileInputExperience=function(e,t){var n=document.querySelector("#_capacitor-camera-input"),s=function(){n.parentNode&&n.parentNode.removeChild(n)};n||((n=document.createElement("input")).id="_capacitor-camera-input",n.type="file",document.body.appendChild(n)),n.accept="image/*",n.capture=!0,e.source===r.Photos||e.source===r.Prompt?n.removeAttribute("capture"):e.direction===o.Front?n.capture="user":e.direction===o.Rear&&(n.capture="environment"),n.addEventListener("change",(function(r){var o=n.files[0],a="jpeg";if("image/png"===o.type?a="png":"image/gif"===o.type&&(a="gif"),e.resultType===i.DataUrl||e.resultType===i.Base64){var c=new FileReader;c.addEventListener("load",(function(){if(e.resultType===i.DataUrl)t({dataUrl:c.result,format:a});else if(e.resultType===i.Base64){var n=c.result.split(",")[1];t({base64String:n,format:a})}s()})),c.readAsDataURL(o)}else t({webPath:URL.createObjectURL(o),format:a}),s()})),n.click()},t.prototype._getCameraPhoto=function(e,t){return new Promise((function(n,r){var o=new FileReader,s=e.type.split("/")[1];t.resultType===i.Uri?n({webPath:URL.createObjectURL(e),format:s}):(o.readAsDataURL(e),o.onloadend=function(){var e=o.result;t.resultType===i.DataUrl?n({dataUrl:e,format:s}):n({base64String:e.split(",")[1],format:s})},o.onerror=function(e){r(e)})}))},t}(w)),new(function(e){function t(){return e.call(this,{name:"Clipboard",platforms:["web"]})||this}return E(t,e),t.prototype.write=function(e){return S(this,void 0,void 0,(function(){var t,n,r;return x(this,(function(o){switch(o.label){case 0:return navigator.clipboard?void 0!==e.string||e.url?navigator.clipboard.writeText?[4,navigator.clipboard.writeText(void 0!==e.string?e.string:e.url)]:[2,Promise.reject("Writting to clipboard not supported in this browser")]:[3,2]:[2,Promise.reject("Clipboard API not available in this browser")];case 1:return o.sent(),[3,10];case 2:if(!e.image)return[3,9];if(!navigator.clipboard.write)return[2,Promise.reject("Setting images not supported in this browser")];o.label=3;case 3:return o.trys.push([3,7,,8]),[4,fetch(e.image)];case 4:return[4,o.sent().blob()];case 5:return t=o.sent(),n=new ClipboardItem(((r={})[t.type]=t,r)),[4,navigator.clipboard.write([n])];case 6:return o.sent(),[3,8];case 7:return o.sent(),[2,Promise.reject("Failed to write image")];case 8:return[3,10];case 9:return[2,Promise.reject("Nothing to write")];case 10:return[2,Promise.resolve()]}}))}))},t.prototype.read=function(){return S(this,void 0,void 0,(function(){var e,t,n,r;return x(this,(function(o){switch(o.label){case 0:return navigator.clipboard?navigator.clipboard.read?[3,1]:navigator.clipboard.readText?[2,this.readText()]:[2,Promise.reject("Reading from clipboard not supported in this browser")]:[2,Promise.reject("Clipboard API not available in this browser")];case 1:return o.trys.push([1,5,,6]),[4,navigator.clipboard.read()];case 2:return e=o.sent(),t=e[0].types[0],[4,e[0].getType(t)];case 3:return n=o.sent(),[4,this._getBlobData(n,t)];case 4:return r=o.sent(),[2,Promise.resolve({value:r,type:t})];case 5:return o.sent(),[2,this.readText()];case 6:return[2]}}))}))},t.prototype.readText=function(){return S(this,void 0,void 0,(function(){var e;return x(this,(function(t){switch(t.label){case 0:return[4,navigator.clipboard.readText()];case 1:return e=t.sent(),[2,Promise.resolve({value:e,type:"text/plain"})]}}))}))},t.prototype._getBlobData=function(e,t){return new Promise((function(n,r){var o=new FileReader;t.includes("image")?o.readAsDataURL(e):o.readAsText(e),o.onloadend=function(){var e=o.result;n(e)},o.onerror=function(e){r(e)}}))},t}(w)),new(function(e){function t(){var t=e.call(this,{name:"Filesystem",platforms:["web"]})||this;return t.DEFAULT_DIRECTORY=s.Data,t.DB_VERSION=1,t.DB_NAME="Disc",t._writeCmds=["add","put","delete"],t}return E(t,e),t.prototype.initDb=function(){return S(this,void 0,void 0,(function(){var e=this;return x(this,(function(n){if(void 0!==this._db)return[2,this._db];if(!("indexedDB"in window))throw new Error("This browser doesn't support IndexedDB");return[2,new Promise((function(n,r){var o=indexedDB.open(e.DB_NAME,e.DB_VERSION);o.onupgradeneeded=t.doUpgrade,o.onsuccess=function(){e._db=o.result,n(o.result)},o.onerror=function(){return r(o.error)},o.onblocked=function(){console.warn("db blocked")}}))]}))}))},t.doUpgrade=function(e){var t=e.target.result;switch(e.oldVersion){case 0:case 1:default:t.objectStoreNames.contains("FileStorage")&&t.deleteObjectStore("FileStorage"),t.createObjectStore("FileStorage",{keyPath:"path"}).createIndex("by_folder","folder")}},t.prototype.dbRequest=function(e,t){return S(this,void 0,void 0,(function(){var n;return x(this,(function(r){return n=-1!==this._writeCmds.indexOf(e)?"readwrite":"readonly",[2,this.initDb().then((function(r){return new Promise((function(o,i){var s=r.transaction(["FileStorage"],n).objectStore("FileStorage"),a=s[e].apply(s,t);a.onsuccess=function(){return o(a.result)},a.onerror=function(){return i(a.error)}}))}))]}))}))},t.prototype.dbIndexRequest=function(e,t,n){return S(this,void 0,void 0,(function(){var r;return x(this,(function(o){return r=-1!==this._writeCmds.indexOf(t)?"readwrite":"readonly",[2,this.initDb().then((function(o){return new Promise((function(i,s){var a=o.transaction(["FileStorage"],r).objectStore("FileStorage").index(e),c=a[t].apply(a,n);c.onsuccess=function(){return i(c.result)},c.onerror=function(){return s(c.error)}}))}))]}))}))},t.prototype.getPath=function(e,t){e=e||this.DEFAULT_DIRECTORY;var n=void 0!==t?t.replace(/^[/]+|[/]+$/g,""):"",r="/"+e;return""!==t&&(r+="/"+n),r},t.prototype.clear=function(){return S(this,void 0,void 0,(function(){var e,t;return x(this,(function(n){switch(n.label){case 0:return[4,this.initDb()];case 1:return e=n.sent(),t=e.transaction(["FileStorage"],"readwrite"),t.objectStore("FileStorage").clear(),[2,{}]}}))}))},t.prototype.readFile=function(e){return S(this,void 0,void 0,(function(){var t,n;return x(this,(function(r){switch(r.label){case 0:return t=this.getPath(e.directory,e.path),[4,this.dbRequest("get",[t])];case 1:if(void 0===(n=r.sent()))throw Error("File does not exist.");return[2,{data:n.content}]}}))}))},t.prototype.writeFile=function(e){return S(this,void 0,void 0,(function(){var t,n,r,o,i,s,a,c,u,l;return x(this,(function(d){switch(d.label){case 0:return t=this.getPath(e.directory,e.path),n=e.data,r=e.recursive,[4,this.dbRequest("get",[t])];case 1:if((o=d.sent())&&"directory"===o.type)throw"The supplied path is a directory.";return i=e.encoding,s=t.substr(0,t.lastIndexOf("/")),[4,this.dbRequest("get",[s])];case 2:return void 0!==d.sent()||-1===(a=s.indexOf("/",1))?[3,4]:(c=s.substr(a),[4,this.mkdir({path:c,directory:e.directory,recursive:r})]);case 3:d.sent(),d.label=4;case 4:return u=Date.now(),l={path:t,folder:s,type:"file",size:n.length,ctime:u,mtime:u,content:!i&&n.indexOf(",")>=0?n.split(",")[1]:n},[4,this.dbRequest("put",[l])];case 5:return d.sent(),[2,{uri:l.path}]}}))}))},t.prototype.appendFile=function(e){return S(this,void 0,void 0,(function(){var t,n,r,o,i,s,a,c,u;return x(this,(function(l){switch(l.label){case 0:return t=this.getPath(e.directory,e.path),n=e.data,r=t.substr(0,t.lastIndexOf("/")),o=Date.now(),i=o,[4,this.dbRequest("get",[t])];case 1:if((s=l.sent())&&"directory"===s.type)throw"The supplied path is a directory.";return[4,this.dbRequest("get",[r])];case 2:return void 0!==l.sent()?[3,4]:(a=r.indexOf("/",1),c=-1!==a?r.substr(a):"/",[4,this.mkdir({path:c,directory:e.directory,recursive:!0})]);case 3:l.sent(),l.label=4;case 4:return void 0!==s&&(n=s.content+n,i=s.ctime),u={path:t,folder:r,type:"file",size:n.length,ctime:i,mtime:o,content:n},[4,this.dbRequest("put",[u])];case 5:return l.sent(),[2,{}]}}))}))},t.prototype.deleteFile=function(e){return S(this,void 0,void 0,(function(){var t;return x(this,(function(n){switch(n.label){case 0:return t=this.getPath(e.directory,e.path),[4,this.dbRequest("get",[t])];case 1:if(void 0===n.sent())throw Error("File does not exist.");return[4,this.dbIndexRequest("by_folder","getAllKeys",[IDBKeyRange.only(t)])];case 2:if(0!==n.sent().length)throw Error("Folder is not empty.");return[4,this.dbRequest("delete",[t])];case 3:return n.sent(),[2,{}]}}))}))},t.prototype.mkdir=function(e){return S(this,void 0,void 0,(function(){var t,n,r,o,i,s,a,c,u;return x(this,(function(l){switch(l.label){case 0:return t=this.getPath(e.directory,e.path),n=e.recursive,r=t.substr(0,t.lastIndexOf("/")),o=(t.match(/\//g)||[]).length,[4,this.dbRequest("get",[r])];case 1:return i=l.sent(),[4,this.dbRequest("get",[t])];case 2:if(s=l.sent(),1===o)throw Error("Cannot create Root directory");if(void 0!==s)throw Error("Current directory does already exist.");if(!n&&2!==o&&void 0===i)throw Error("Parent directory must exist");return n&&2!==o&&void 0===i?(a=r.substr(r.indexOf("/",1)),[4,this.mkdir({path:a,directory:e.directory,recursive:n})]):[3,4];case 3:l.sent(),l.label=4;case 4:return c=Date.now(),u={path:t,folder:r,type:"directory",size:0,ctime:c,mtime:c},[4,this.dbRequest("put",[u])];case 5:return l.sent(),[2,{}]}}))}))},t.prototype.rmdir=function(e){return S(this,void 0,void 0,(function(){var t,n,r,o,i,s,a,c,u,l;return x(this,(function(d){switch(d.label){case 0:return t=e.path,n=e.directory,r=e.recursive,o=this.getPath(n,t),[4,this.dbRequest("get",[o])];case 1:if(void 0===(i=d.sent()))throw Error("Folder does not exist.");if("directory"!==i.type)throw Error("Requested path is not a directory");return[4,this.readdir({path:t,directory:n})];case 2:if(0!==(s=d.sent()).files.length&&!r)throw Error("Folder is not empty");a=0,c=s.files,d.label=3;case 3:return a<c.length?(u=c[a],l=t+"/"+u,[4,this.stat({path:l,directory:n})]):[3,9];case 4:return"file"!==d.sent().type?[3,6]:[4,this.deleteFile({path:l,directory:n})];case 5:return d.sent(),[3,8];case 6:return[4,this.rmdir({path:l,directory:n,recursive:r})];case 7:d.sent(),d.label=8;case 8:return a++,[3,3];case 9:return[4,this.dbRequest("delete",[o])];case 10:return d.sent(),[2,{}]}}))}))},t.prototype.readdir=function(e){return S(this,void 0,void 0,(function(){var t,n,r;return x(this,(function(o){switch(o.label){case 0:return t=this.getPath(e.directory,e.path),[4,this.dbRequest("get",[t])];case 1:if(n=o.sent(),""!==e.path&&void 0===n)throw Error("Folder does not exist.");return[4,this.dbIndexRequest("by_folder","getAllKeys",[IDBKeyRange.only(t)])];case 2:return r=o.sent(),[2,{files:r.map((function(e){return e.substring(t.length+1)}))}]}}))}))},t.prototype.getUri=function(e){return S(this,void 0,void 0,(function(){var t,n;return x(this,(function(r){switch(r.label){case 0:return t=this.getPath(e.directory,e.path),[4,this.dbRequest("get",[t])];case 1:return void 0!==(n=r.sent())?[3,3]:[4,this.dbRequest("get",[t+"/"])];case 2:n=r.sent(),r.label=3;case 3:if(void 0===n)throw Error("Entry does not exist.");return[2,{uri:n.path}]}}))}))},t.prototype.stat=function(e){return S(this,void 0,void 0,(function(){var t,n;return x(this,(function(r){switch(r.label){case 0:return t=this.getPath(e.directory,e.path),[4,this.dbRequest("get",[t])];case 1:return void 0!==(n=r.sent())?[3,3]:[4,this.dbRequest("get",[t+"/"])];case 2:n=r.sent(),r.label=3;case 3:if(void 0===n)throw Error("Entry does not exist.");return[2,{type:n.type,size:n.size,ctime:n.ctime,mtime:n.mtime,uri:n.path}]}}))}))},t.prototype.rename=function(e){return S(this,void 0,void 0,(function(){return x(this,(function(t){return[2,this._copy(e,!0)]}))}))},t.prototype.copy=function(e){return S(this,void 0,void 0,(function(){return x(this,(function(t){return[2,this._copy(e,!1)]}))}))},t.prototype._copy=function(e,t){return void 0===t&&(t=!1),S(this,void 0,void 0,(function(){var n,r,o,i,s,a,c,u,l,d,f,h,p,m,g,v,y=this;return x(this,(function(w){switch(w.label){case 0:if(n=e.to,r=e.from,o=e.directory,i=e.toDirectory,!n||!r)throw Error("Both to and from must be provided");if(i||(i=o),s=this.getPath(o,r),a=this.getPath(i,n),s===a)return[2,{}];if(a.startsWith(s))throw Error("To path cannot contain the from path");w.label=1;case 1:return w.trys.push([1,3,,6]),[4,this.stat({path:n,directory:i})];case 2:return c=w.sent(),[3,6];case 3:return w.sent(),(u=n.split("/")).pop(),l=u.join("/"),u.length>0?[4,this.stat({path:l,directory:i})]:[3,5];case 4:if("directory"!==w.sent().type)throw new Error("Parent directory of the to path is a file");w.label=5;case 5:return[3,6];case 6:if(c&&"directory"===c.type)throw new Error("Cannot overwrite a directory with a file");return[4,this.stat({path:r,directory:o})];case 7:switch(d=w.sent(),f=function(e,t,n){return S(y,void 0,void 0,(function(){var r,o;return x(this,(function(s){switch(s.label){case 0:return r=this.getPath(i,e),[4,this.dbRequest("get",[r])];case 1:return(o=s.sent()).ctime=t,o.mtime=n,[4,this.dbRequest("put",[o])];case 2:return s.sent(),[2]}}))}))},d.type){case"file":return[3,8];case"directory":return[3,15]}return[3,28];case 8:return[4,this.readFile({path:r,directory:o})];case 9:return h=w.sent(),t?[4,this.deleteFile({path:r,directory:o})]:[3,11];case 10:w.sent(),w.label=11;case 11:return[4,this.writeFile({path:n,directory:i,data:h.data})];case 12:return w.sent(),t?[4,f(n,d.ctime,d.mtime)]:[3,14];case 13:w.sent(),w.label=14;case 14:return[2,{}];case 15:if(c)throw Error("Cannot move a directory over an existing object");w.label=16;case 16:return w.trys.push([16,20,,21]),[4,this.mkdir({path:n,directory:i,recursive:!1})];case 17:return w.sent(),t?[4,f(n,d.ctime,d.mtime)]:[3,19];case 18:w.sent(),w.label=19;case 19:return[3,21];case 20:return w.sent(),[3,21];case 21:return[4,this.readdir({path:r,directory:o})];case 22:p=w.sent().files,m=0,g=p,w.label=23;case 23:return m<g.length?(v=g[m],[4,this._copy({from:r+"/"+v,to:n+"/"+v,directory:o,toDirectory:i},t)]):[3,26];case 24:w.sent(),w.label=25;case 25:return m++,[3,23];case 26:return t?[4,this.rmdir({path:r,directory:o})]:[3,28];case 27:w.sent(),w.label=28;case 28:return[2,{}]}}))}))},t._debug=!0,t}(w));var C=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.forEach((function(t){if(t&&"object"==typeof t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})),e};new(function(e){function t(){return e.call(this,{name:"Geolocation",platforms:["web"]})||this}return E(t,e),t.prototype.getCurrentPosition=function(e){var t=this;return new Promise((function(n,r){return t.requestPermissions().then((function(t){window.navigator.geolocation.getCurrentPosition((function(e){n(e)}),(function(e){r(e)}),C({enableHighAccuracy:!0,timeout:1e4,maximumAge:0},e))}))}))},t.prototype.watchPosition=function(e,t){return""+window.navigator.geolocation.watchPosition((function(e){t(e)}),(function(e){t(null,e)}),C({enableHighAccuracy:!0,timeout:1e4,maximumAge:0},e))},t.prototype.clearWatch=function(e){return window.navigator.geolocation.clearWatch(parseInt(e.id,10)),Promise.resolve()},t}(w)),new(function(e){function t(){return e.call(this,{name:"Device",platforms:["web"]})||this}return E(t,e),t.prototype.getInfo=function(){return S(this,void 0,void 0,(function(){var e,t;return x(this,(function(n){return e=navigator.userAgent,t=this.parseUa(e),[2,Promise.resolve({model:t.model,platform:"web",appVersion:"",appBuild:"",appId:"",appName:"",operatingSystem:t.operatingSystem,osVersion:t.osVersion,manufacturer:navigator.vendor,isVirtual:!1,uuid:this.getUid()})]}))}))},t.prototype.getBatteryInfo=function(){return S(this,void 0,void 0,(function(){var e;return x(this,(function(t){switch(t.label){case 0:e={},t.label=1;case 1:return t.trys.push([1,3,,4]),[4,navigator.getBattery()];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),[3,4];case 4:return[2,Promise.resolve({batteryLevel:e.level,isCharging:e.charging})]}}))}))},t.prototype.getLanguageCode=function(){return S(this,void 0,void 0,(function(){return x(this,(function(e){return[2,{value:navigator.language}]}))}))},t.prototype.parseUa=function(e){var t={},n=e.indexOf("(")+1,r=e.indexOf(") AppleWebKit");-1!==e.indexOf(") Gecko")&&(r=e.indexOf(") Gecko"));var o=e.substring(n,r);if(-1!==e.indexOf("Android"))t.model=o.replace("; wv","").split("; ").pop().split(" Build")[0],t.osVersion=o.split("; ")[1];else if(t.model=o.split("; ")[0],navigator.oscpu)t.osVersion=navigator.oscpu;else if(-1!==e.indexOf("Windows"))t.osVersion=o;else{var i=o.split("; ").pop().replace(" like Mac OS X","").split(" ");t.osVersion=i[i.length-1].replace(/_/g,".")}return/android/i.test(e)?t.operatingSystem="android":/iPad|iPhone|iPod/.test(e)&&!window.MSStream?t.operatingSystem="ios":/Win/.test(e)?t.operatingSystem="windows":/Mac/i.test(e)?t.operatingSystem="mac":t.operatingSystem="unknown",t},t.prototype.getUid=function(){var e=window.localStorage.getItem("_capuid");return e||(e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),window.localStorage.setItem("_capuid",e),e)},t}(w)),new(function(e){function t(){var t=e.call(this,{name:"LocalNotifications",platforms:["web"]})||this;return t.pending=[],t}return E(t,e),t.prototype.createChannel=function(e){throw new Error("Feature not available in the browser. "+e.id)},t.prototype.deleteChannel=function(e){throw new Error("Feature not available in the browser. "+e.id)},t.prototype.listChannels=function(){throw new Error("Feature not available in the browser")},t.prototype.sendPending=function(){var e=this,t=[],n=+new Date;this.pending.forEach((function(r){r.schedule&&r.schedule.at&&+r.schedule.at<=n&&(e.buildNotification(r),t.push(r))})),console.log("Sent pending, removing",t),this.pending=this.pending.filter((function(e){return!t.find((function(t){return t===e}))}))},t.prototype.sendNotification=function(e){var t=this,n=e;if(e.schedule&&e.schedule.at){var r=+e.schedule.at-+new Date;return this.pending.push(n),void setTimeout((function(){t.sendPending()}),r)}this.buildNotification(e)},t.prototype.buildNotification=function(e){var t=e;return new Notification(t.title,{body:t.body})},t.prototype.schedule=function(e){var t=this,n=[];return e.notifications.forEach((function(e){n.push(t.sendNotification(e))})),Promise.resolve({notifications:e.notifications.map((function(e){return{id:""+e.id}}))})},t.prototype.getPending=function(){return Promise.resolve({notifications:this.pending.map((function(e){return{id:""+e.id}}))})},t.prototype.registerActionTypes=function(e){throw new Error("Method not implemented.")},t.prototype.cancel=function(e){return console.log("Cancel these",e),this.pending=this.pending.filter((function(t){return!e.notifications.find((function(e){return e.id===""+t.id}))})),Promise.resolve()},t.prototype.areEnabled=function(){return Promise.resolve({value:"granted"===Notification.permission})},t.prototype.requestPermission=function(){return new Promise((function(e){Notification.requestPermission((function(t){var n=!0;"denied"!==t&&"default"!==t||(n=!1),e({granted:n})}))}))},t.prototype.requestPermissions=function(){return new Promise((function(e,t){Notification.requestPermission((function(n){"denied"!==n&&"default"!==n?e({results:[n]}):t(n)}))}))},t}(w)),new(function(e){function t(){return e.call(this,{name:"Share",platforms:["web"]})||this}return E(t,e),t.prototype.share=function(e){return navigator.share?navigator.share({title:e.title,text:e.text,url:e.url}):Promise.reject("Web Share API not available")},t}(w)),new(function(e){function t(){return e.call(this,{name:"Modals",platforms:["web"]})||this}return E(t,e),t.prototype.alert=function(e){return S(this,void 0,void 0,(function(){return x(this,(function(t){return window.alert(e.message),[2,Promise.resolve()]}))}))},t.prototype.prompt=function(e){return S(this,void 0,void 0,(function(){var t;return x(this,(function(n){return t=window.prompt(e.message,e.inputText||""),[2,Promise.resolve({value:t,cancelled:null===t})]}))}))},t.prototype.confirm=function(e){return S(this,void 0,void 0,(function(){var t;return x(this,(function(n){return t=window.confirm(e.message),[2,Promise.resolve({value:t})]}))}))},t.prototype.showActions=function(e){return S(this,void 0,void 0,(function(){var t=this;return x(this,(function(n){return[2,new Promise((function(n,r){return S(t,void 0,void 0,(function(){var t,r=this;return x(this,(function(o){return(t=document.querySelector("pwa-action-sheet"))||(t=document.createElement("pwa-action-sheet"),document.body.appendChild(t)),t.header=e.title,t.cancelable=!1,t.options=e.options,t.addEventListener("onSelection",(function(e){return S(r,void 0,void 0,(function(){var t;return x(this,(function(r){return t=e.detail,n({index:t}),[2]}))}))})),[2]}))}))}))]}))}))},t}(w)),new(function(e){function t(){var t=e.call(this,{name:"Motion"})||this;return t.registerWindowListener("devicemotion","accel"),t.registerWindowListener("deviceorientation","orientation"),t}return E(t,e),t}(w)),new(function(e){function t(){var t=e.call(this,{name:"Network",platforms:["web"]})||this;return t.listenerFunction=null,t}return E(t,e),t.prototype.getStatus=function(){return new Promise((function(e,t){if(window.navigator){var n=window.navigator.onLine,r=window.navigator.connection||window.navigator.mozConnection||window.navigator.webkitConnection,o=r?r.type||r.effectiveType:"wifi";e({connected:n,connectionType:n?o:"none"})}else t("Network info not available")}))},t.prototype.addListener=function(e,t){var n=window.navigator.connection||window.navigator.mozConnection||window.navigator.webkitConnection,r=n?n.type||n.effectiveType:"wifi",o=t.bind(this,{connected:!0,connectionType:r}),i=t.bind(this,{connected:!1,connectionType:"none"});if(0===e.localeCompare("networkStatusChange"))return window.addEventListener("online",o),window.addEventListener("offline",i),{remove:function(){window.removeEventListener("online",o),window.removeEventListener("offline",i)}}},t}(w)),new(function(e){function t(){return e.call(this,{name:"Permissions"})||this}return E(t,e),t.prototype.query=function(e){return S(this,void 0,void 0,(function(){var t,n;return x(this,(function(r){switch(r.label){case 0:return(t=window.navigator).permissions?(n=e.name===h.Photos?"camera":e.name,[4,t.permissions.query({name:n})]):[2,Promise.reject("This browser does not support the Permissions API")];case 1:return[2,{state:r.sent().state}]}}))}))},t}(w)),new(function(e){function t(){return e.call(this,{name:"SplashScreen",platforms:["web"]})||this}return E(t,e),t.prototype.show=function(e,t){return Promise.resolve()},t.prototype.hide=function(e,t){return Promise.resolve()},t}(w)),new(function(e){function t(){var t=e.call(this,{name:"Storage",platforms:["web"]})||this;return t.KEY_PREFIX="_cap_",t}return E(t,e),t.prototype.get=function(e){var t=this;return new Promise((function(n,r){n({value:window.localStorage.getItem(t.makeKey(e.key))})}))},t.prototype.set=function(e){var t=this;return new Promise((function(n,r){window.localStorage.setItem(t.makeKey(e.key),e.value),n()}))},t.prototype.remove=function(e){var t=this;return new Promise((function(n,r){window.localStorage.removeItem(t.makeKey(e.key)),n()}))},t.prototype.keys=function(){var e=this;return new Promise((function(t,n){t({keys:Object.keys(localStorage).filter((function(t){return e.isKey(t)})).map((function(t){return e.getKey(t)}))})}))},t.prototype.clear=function(){var e=this;return new Promise((function(t,n){Object.keys(localStorage).filter((function(t){return e.isKey(t)})).forEach((function(e){return window.localStorage.removeItem(e)})),t()}))},t.prototype.makeKey=function(e){return this.KEY_PREFIX+e},t.prototype.isKey=function(e){return 0===e.indexOf(this.KEY_PREFIX)},t.prototype.getKey=function(e){return e.substr(this.KEY_PREFIX.length)},t}(w)),new(function(e){function t(){return e.call(this,{name:"Toast",platforms:["web"]})||this}return E(t,e),t.prototype.show=function(e){return S(this,void 0,void 0,(function(){var t,n;return x(this,(function(r){return t=2e3,e.duration&&(t="long"===e.duration?3500:2e3),(n=document.createElement("pwa-toast")).duration=t,n.message=e.text,document.body.appendChild(n),[2]}))}))},t}(w));!function(e){for(var t=0,n=y.getPlugins();t<n.length;t++){var r=n[t];b(e,r)}}(v.b);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function T(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))}const A=new class extends w{constructor(){super({name:"BlobWriter",platforms:["web"]})}getConfig(){return T(this,void 0,void 0,(function*(){const e=new Error("Not implemented for web");throw e.code="NOT_IMPLEMENTED",e}))}};var L;function O(e){return T(this,void 0,void 0,(function*(){try{const[{baseUrl:t,authToken:n},{uri:r}]=yield Promise.all([v.b.BlobWriter.getConfig(),v.b.Filesystem.getUri({path:e.path,directory:e.directory})]),o=r.replace("file://",""),i=t+o+(e.recursive?"?recursive=true":""),{status:s}=yield fetch(i,{headers:{authorization:n},method:"put",body:e.data});if(204!==s)throw new Error("unexpected HTTP status: "+s);return{uri:r}}catch(t){if("function"==typeof e.fallback?e.fallback(t):e.fallback){"NOT_IMPLEMENTED"!==t.code&&console.error(t);const n=function(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,o=0;o<r;o++)t+=String.fromCharCode(n[o]);return btoa(t)}(yield new Response(e.data).arrayBuffer()),{uri:r}=yield v.b.Filesystem.writeFile({path:e.path,directory:e.directory,data:n,recursive:e.recursive});return{uri:r}}throw t}}))}L=A,b(v.b,L);var R=n(0),D=n.n(R);window.writeFile=O,window.FilesystemDirectory=s;const{Filesystem:j}=v.b,_="web"===U(),F="android"===U(),I="ios"===U();function U(){return v.a.getPlatform()}function k(){const{StatusBar:e}=v.b;return e.hide()}function N(){const{StatusBar:e}=v.b;return e.show()}async function W(e){const{Toast:t}=v.b;await t.show({text:e})}async function q(e){try{return await j.mkdir({path:e,directory:s.Data,recursive:!1})}catch(e){return console.error("Unable to make directory",e),null}}async function B(e){console.log("openTheater.readDir got "+e);try{return await j.readdir({path:D.a.join("/media",e),directory:s.Data})}catch(e){return console.error("OpenTheater.readDir: Unable to read dir",e),null}}async function M(e,t){try{const n=await O({path:D.a.join("/media",e),directory:s.Data,data:t,recursive:!0,fallback:e=>{console.error(e)}});return console.log("Wrote file",n),n}catch(e){return console.error("Unable to write file",e),null}}async function K(e,t="/media"){return console.log("openTheater.readFile got",e),await j.readFile({path:D.a.join(t,e),directory:s.Data,encoding:a.UTF8}).catch(e=>{throw console.log("openTheater.readFile got an error",e),e})}async function z(e){return await j.deleteFile({path:e,directory:s.Data}),console.log("file delete was forwarded to system"),!0}async function Y(e,t="/media"){try{return await j.stat({path:D.a.join(t,e),directory:s.Data})}catch(t){return console.error("openTheater.getFileStat: Unable to stat file "+e,t),null}}async function H(e,t,n){let r=D.a.join(e.join("/"),t,n),o=await Y(r),i=null;return console.log("projectPath",e,"channelUuid",t,"filename",n),console.log("filepath",r),console.log("!!!! stat",o),o&&o.uri&&(i=v.a.convertFileSrc(o.uri)),console.log("capacitorUri",i),i}function V(){console.log("]OPEN THEATER[ Client is starting"),console.log("we are running in",v.a.getPlatform(),"environment"),console.log("Screenreader is available:",v.a.isPluginAvailable("ScreenReader"))}async function X(){if(_)return console.log("scanSSIDs is not available on this platform. You better involve the user here."),!1;let e=await WifiWizard2.getConnectedSSID(),t=await v.b.Network.getStatus();return t.wifissid=e,t}function G(){let e=v.b.Device.getBatteryInfo();return console.log("battery:",e),e}async function $(e,t=8e3){for(let n of e){if(n.ssid){let e=null;if(n.pw||(n.pw=!1),e=await J(n.ssid,n.pw),!e){console.log(`\n        could not connect to wifi network with ssid ${n.ssid}. \n        will try next repo server in config...`);continue}}console.log("fetching projects from",n.serveruri);let e=await Promise.race([fetch(n.serveruri,{cache:"no-store"}),new Promise((e,n)=>setTimeout(()=>n(new Error("Timeout")),t))]).then(async e=>(console.log("got response from",n.serveruri),await e.json())).catch(e=>(console.error("openTheater.detectServer could not fetch from endpoint.serveruri \n      "+n.serveruri,e),null));if(console.log(e),e)return{repository:n.serveruri,projectList:e};console.log(`\n        could not connect to server ${n.serveruri}. \n        will try next repo server in config...`)}return console.log("could not connect to any server listed in the repo list config"),null}async function J(e,t){let n=null;return I?(console.log("platform is IOS",I),n=await WifiWizard2.iOSConnectNetwork(e,t).catch(t=>{console.log("error connceting to ssid",e,t)})):F?(n=await WifiWizard2.connect(e,t).catch(e=>{}),"NETWORK_CONNECTION_COMPLETED"===n&&(n=e)):console.log("connectToSSID is not available on this platform"),n}async function Q(){if(!F)return console.log("scanSSIDs is not available on this platform. You better involve the user here."),!1;let e=await WifiWizard2.scan();return console.log(e),e}function Z(e){return new Promise((t,n)=>{console.log("setScreenBrightness is not available atm"),cordova.plugins.brightness.setBrightness(e,()=>{t(!0)},e=>{console.log("error setting screen brightness",e),n(null)})})}function ee(e){if(!e||"string"!=typeof e)throw"getServiceProtocol requires parameter service (string)";return e.startsWith("ws://")||e.startsWith("wss://")?"websockets":e.startsWith("http://")||e.startsWith("https://")?"http":e.startsWith("mqtt://")?"mqtt":void 0}async function te(e){if(!e.provisioningUri||"string"!=typeof e.provisioningUri)throw"getProvisioningFilesFromProject requires Project obj to contain provisioningUri (string)";let t=new URL(e.provisioningUri);t.pathname=D.a.join(t.pathname,"fileList.json"),t=t.toString();const n=await fetch(t,{cache:"no-store"});if(!n.ok)throw"getProvisioningFilesFromProject encountered an error communicating with provisioning server";const r=await n.json().catch(e=>{throw{message:"getProvisioningFilesFromProject got falsy response from provisioning server",error:e}});return console.log("listOfAssetFiles:",r),r}async function ne(e,t){console.log("getFileListFromCache got "+e);const n=D.a.join("/media",e.join("/"),t),r=await K(D.a.join(e.join("/"),t,"fileList.json")).catch(e=>{throw{message:"getFileListFromCache could not find projects fileList.json",stack:e}});console.log("file is",r);const o=JSON.parse(r.data);console.log("fileList is",o);let i=o;if(!o||null==o){console.error("getFileListFromCache could not find \n        "+D.a.join(e.join("/"),"fileList.json"));const t=await B(e.join("/"));i={files:await Promise.all(t.files.map(async e=>{const t=await Y(D.a.join(n,e),""),r=t.mtime;return{filepath:e,filesize:t.size,lastmodified:r}}))}}return i}async function re(){if(null!==await B("/"))return console.log("Open Theater media root directory was initialized: directory already exists"),!0;if(!await q("/media"))throw"initMediaRootDir could not create MEDIA_BASE_PATH /media";return console.log("Open Theater media root directory was initialized: directory was created"),!0}function oe(e,t){if(null==e)return t.files;let n=[];for(const r of t.files)e.files.some(e=>e.filepath===r.filepath)?e.files.some(e=>(console.log(e,"is older than",r,e.filepath===r.filepath&&e.lastmodified<r.lastmodified),e.filepath===r.filepath&&e.lastmodified<r.lastmodified))&&n.push(r):n.push(r);return console.log("openTheater.getFileListDiff nonmatching:",n),n}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s}));var r,o=n(3),i=(r="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{}).Capacitor=r.Capacitor||new o.a,s=i.Plugins}).call(this,n(4))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(){var e=this;this.platform="web",this.isNative=!1,this.Plugins={},"undefined"!=typeof Proxy&&(this.Plugins=new Proxy(this.Plugins,{get:function(t,n){if(void 0===t[n]){var r=e;return new Proxy({},{get:function(e,t){return void 0===e[t]?r.pluginMethodNoop.bind(r,e,t,n):e[t]}})}return t[n]}}))}return e.prototype.pluginMethodNoop=function(e,t,n){return Promise.reject(n+" does not have web implementation.")},e.prototype.getPlatform=function(){return this.platform},e.prototype.isPluginAvailable=function(e){return this.Plugins.hasOwnProperty(e)},e.prototype.convertFileSrc=function(e){return e},e.prototype.handleError=function(e){console.error(e)},e}()},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var c,u=[],l=!1,d=-1;function f(){l&&c&&(l=!1,c.length?u=c.concat(u):d=-1,u.length&&h())}function h(){if(!l){var e=a(f);l=!0;for(var t=u.length;t;){for(c=u,u=[];++d<t;)c&&c[d].run();d=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),1!==u.length||l||a(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},,,function(e,t,n){"use strict";n.r(t);var r=n(1);n(0);window.openTheater=r,console.log("loaded openTheater.js",r);let o=null;window.context=o;try{if(o=JSON.parse(decodeURI(i("data"))),!(o.channelUuid&&o.projectUuid&&o.repository&&o.chosenChannels))throw"data JSON handed over from provisioning URI broken";console.log(o),console.log("repository:",o.repository),console.log("channel:",o.channelUuid),console.log("projectUuid:",o.projectUuid),console.log("chosenChannels:",o.chosenChannels),async function(e){const t=(await(await fetch(e.repository)).json().catch(e=>{console.error(e),alert("error fetching projectList.json from repository. will reload."),window.location="./index.html"})).projects.find(t=>t.projectUuid===e.projectUuid),n=t.channelList.find(t=>t.channelUuid===e.channelUuid),o=e.chosenChannels;!function(e,t,n){console.log("project",e),console.log("startChannel",t);const o=e.triggerUri;t.triggerEndpoint&&(o=t.triggerUri);const i=io(o,{transport:["websocket"]});let s=[];for(let e of n)s.push({channelUuid:e.channelUuid,keys:e.containerIds,label:e.label});s.push({channelUuid:"d2ec3720-e0d5-42d7-a59e-c7fbcbaf6e3c",renderer:"customRenderer.html",rendererJS:"customRenderer.js",rendererCSS:"customRenderer.css",keys:["text_de","video_de","image_de"],label:"Multimedia Prsentation DE"});console.log("availableChannels",s),console.log("availableChannelsOld",s);let a,c=s[0];function u(){let e=document.querySelectorAll("select"),t=M.FormSelect.init(e);console.log("MSelect:",t)}function l(){document.getElementById("opentheaterapp").innerHTML=`\n        ${c.keys.map(e=>e.startsWith("text_")?`<div id="${e}" class="ot_default draggable">\n                                <div>placeholder</div>\n                            </div>`:e.startsWith("image_")?`<div id="${e}" class="ot_default draggable">\n                                <img alt="" src="">\n                            </div>`:e.startsWith("video_")?`<div id="${e}" class="draggable">\n                                <video style="width:300px"  alt="" src="" autoplay muted playsinline></video>\n                            </div>`:e.startsWith("audio_")?`<div id="${e}" class="draggable">\n                                <audio alt="" src="" autoplay ></audio>\n                            </div>`:void 0).join("\n")}\n        `,u(),g()}async function d(e){let t=document.getElementById(e),n=t.children,r=n[0];for(let e of n){"true"==e.getAttribute("data-isclone")&&e.remove()}f(r);let o=r.cloneNode(!0);return o.id&&(o.id+="-clone"),o.setAttribute("data-isclone","true"),h(o),t.prepend(o),o}function f(e){if(e.classList)for(let t of e.classList)t.indexOf("animate__")>-1&&e.classList.remove(t);return!0}function h(e){e.addEventListener("animationend",()=>{let t=e.classList.contains("animate__animated"),n="true"==e.getAttribute("data-isclone");console.log("animationend",e," isClone",n," ::: animationDone",t),n?console.log("animation done clone"):(console.log("animation done - not a clone"),e.parentElement?p(e.parentElement.id):console.log("ERROR - element is gone already"))})}function p(e){console.log("removeCloneAndRename",e);let t=document.getElementById(e);if(t){let e=t.querySelectorAll(":not([data-isclone])"),n=t.querySelectorAll("[data-isclone]");if(e.length>0&&n.length>0){console.log("originals",e);for(let t of e)t.remove();for(let e of n)e.id&&(e.id=e.id.replace("-clone","")),e.removeAttribute("data-isclone")}}}async function m(t){if(console.log("displayContentDefault","payload:",t),t&&t.content){console.log("/// 1. REPLACE CONTENT ///");for(let n of Object.keys(t.content)){const o=document.getElementById(n);if(o){let i=t.content[n];if((n.startsWith("image_")||n.startsWith("audio_")||n.startsWith("video_"))&&!1===i.startsWith("http")){let t=await r.getCapacitorAssetUriForChannel(e.projectPath,c.channelUuid,i);t&&(i=t)}if(n.startsWith("text_")){(await d(o.id)).innerText=i}else if(n.startsWith("image_")){let e=await d(o.id);e.setAttribute("src",i),console.log(e)}else if(n.startsWith("audio_")){let e=o.children;e&&e[0]&&(e[0].setAttribute("src",i),e[0].play())}else if(n.startsWith("video_")){console.log("blockElement",o);let e=o.children;console.log("videoElements",e),e&&e[0]&&(e[0].setAttribute("src",i),e[0].play())}else n.startsWith("html_")&&(o.innerHTML=i)}else console.log(n+" content has no template block avaible to be rendered to")}}if(t&&t.styles){console.log("/// 2. APPLY STYLES ///");for(let e of Object.keys(t.styles)){console.log("styleSelectorname",e);let n=t.styles[e].classList,r=t.styles[e].inline;for(let t of document.querySelectorAll(e)){for(let e of n)t.classList.add(e);for(let n of Object.keys(r)){let o=r[n];console.log("inlineStyleName: ",n," inlineStyleValue:",o),"string"==typeof t.style[n]?t.style[n]=o:console.error(e,":::",n,"is not a valid inline style property")}}}}if(t&&t.transitions){console.log("/// 3. APPLY TRANSITIONS ///");for(let e of Object.keys(t.transitions)){let n=t.transitions[e];if(n){console.log("transitions",n),"default"==e&&(e=".ot_default");for(let t of document.querySelectorAll(e)){console.log("transitionSelectorParent",t);let e=t.children;for(let r of e)if(r){let e="true"==r.getAttribute("data-isclone");h(r),f(r),console.log("transitionSelectorDOM",r),e?(n.fadeInTime>-1&&r.style.setProperty("--animate-duration",n.fadeInTime+"ms"),"animate__none"!==n.fadeInClass?r.classList&&r.classList.add("animate__animated",n.fadeInClass):p(t.id),n.fadeInDelay>0&&r.style.setProperty("--animate-delay","2s")):(n.fadeOutTime>-1&&r.style.setProperty("--animate-duration",n.fadeOutTime+"ms"),"animate__none"!==n.fadeOutClass?r.classList?r.classList.add("animate__animated",n.fadeOutClass):console.log("COULD NOT ADD ANIMATE CLASS TO ",r):p(t.id),n.fadeOutDelay>0&&r.style.setProperty("--animate-delay",n.fadeOutDelay+"ms"))}}}}}}function g(){const e=document.getElementsByClassName("draggable");for(const t of e)v(t)}function v(e){let t=0,n=0,r=0,o=0,i=Date.now();function s(t){if((t=t||window.event).preventDefault(),t.touches){if(r=t.touches[0].clientX,o=t.touches[0].clientY,Date.now()-e.lastTouch<300)return void console.log("doubletap on",e);e.lastTouch=Date.now()}else r=t.clientX,o=t.clientY;document.onmouseup=a,document.ontouchend=a,document.onmousemove=c,document.ontouchmove=c}function a(){document.onmouseup=null,document.ontouchend=null,document.onmousemove=null,document.ontouchmove=null}function c(i){(i=i||window.event).preventDefault(),i.touches?(t=r-i.touches[0].clientX,n=o-i.touches[0].clientY,r=i.touches[0].clientX,o=i.touches[0].clientY):(t=r-i.clientX,n=o-i.clientY,r=i.clientX,o=i.clientY),e.style.top=e.offsetTop-n+"px",e.style.left=e.offsetLeft-t+"px"}e.lastTouch=i,e.onmousedown=s,e.ontouchstart=s}l(),document.getElementById("menu").innerHTML=`<select id="channels" onchange="switchChannel(this)">\n    ${s.map((e,t)=>`<option value="${t}">${e.label}</option>`).join("\n")}\n    </select>`,u(),window.switchChannel=function(e){var t;c=s[e.value],console.log("choosenChannel",c),c.renderer?(t="/assets/"+c.renderer,fetch(t).then(e=>e.text()).then(e=>{document.getElementById("opentheaterapp").innerHTML=e})).then(()=>{(function(e,t){return fetch(e).then(e=>e.text()).then(e=>{console.log(e);const t=document.createElement("script");t.innerText=e,document.getElementById("dynamicScript").innerText="",document.getElementById("dynamicScript").appendChild(t)})})("/assets/"+c.rendererJS).then(()=>{m(a)}),g()}):(l(),m(a))},i.on("displayContent",(function(e){a=e,"function"==typeof displayContent?displayContentCustom(e):m(a)})),i.on("reload-client",(function(e){console.log("reload requested"),location.reload()}))}(t,n,o)}(o)}catch{alert("error, need channel and projectPath. Will go back to Provisioning.")}function i(e){let t=null;return t=new URLSearchParams(document.location.search).get(e),t}window.getGetParam=i}]);